version: 2.1
jobs:
    build-php:
        docker:
            - image: cimg/php:8.2-node
        steps:
            - checkout
            - run:
                  name: Install Composer
                  command: |
                      curl -s https://getcomposer.org/installer | php
                      mv composer.phar /usr/local/bin/composer
            - run:
                  name: Install production dependencies
                  command: composer install --no-dev -o
            - run:
                  name: Composer validate
                  command: composer validate --strict
            - run:
                  name: List installed phpcs standards
                  command: vendor/bin/phpcs -i
            - persist_to_workspace:
                  root: .
                  paths:
                      - vendor
workflows:
    version: 2
    build:
        jobs:
            - build-php
